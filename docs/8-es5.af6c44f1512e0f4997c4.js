function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{d7gL:function(e,t,n){"use strict";n.r(t),n.d(t,"CustomerModule",(function(){return j}));var r,o=n("PCNd"),c=n("tyNb"),i=n("fXoL"),a=((r=function(){function e(t){_classCallCheck(this,e),this.router=t}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||r)(i.Ib(c.b))},r.\u0275cmp=i.Cb({type:r,selectors:[["cm-orders"]],decls:27,vars:0,consts:[[1,"orders","view"],[1,"container"],[1,"glyphicon","glyphicon-user"],[1,"navbar"],[1,"nav","navbar-nav"],[1,"toolbar-item"],["routerLink","details","routerLinkActive","active"],[1,"glyphicon","glyphicon-list"],["routerLink","orders","routerLinkActive","active"],[1,"glyphicon","glyphicon-tags"],["routerLink","edit","routerLinkActive","active"],[1,"glyphicon","glyphicon-edit"],["routerLink","/customers"]],template:function(e,t){1&e&&(i.Mb(0,"div",0),i.Mb(1,"div",1),i.Mb(2,"header"),i.Mb(3,"h3"),i.Jb(4,"span",2),i.nc(5,"\xa0\xa0Customer Information"),i.Lb(),i.Lb(),i.Jb(6,"br"),i.Mb(7,"div",3),i.Mb(8,"ul",4),i.Mb(9,"li",5),i.Mb(10,"a",6),i.Jb(11,"span",7),i.nc(12,"\xa0\xa0Customer Details "),i.Lb(),i.Lb(),i.Mb(13,"li",5),i.Mb(14,"a",8),i.Jb(15,"span",9),i.nc(16,"\xa0\xa0Customer Orders "),i.Lb(),i.Lb(),i.Mb(17,"li",5),i.Mb(18,"a",10),i.Jb(19,"span",11),i.nc(20,"\xa0\xa0Edit Customer "),i.Lb(),i.Lb(),i.Lb(),i.Lb(),i.Mb(21,"div",1),i.Jb(22,"router-outlet"),i.Jb(23,"br"),i.Jb(24,"br"),i.Mb(25,"a",12),i.nc(26,"View all Customers"),i.Lb(),i.Lb(),i.Lb(),i.Lb())},directives:[c.d,c.c,c.f],encapsulation:2}),r),s=n("cplz"),b=n("ofXK"),u=n("vTEt");function l(e,t){if(1&e&&(i.Mb(0,"tr"),i.Mb(1,"td"),i.nc(2),i.Lb(),i.Mb(3,"td",6),i.nc(4),i.Wb(5,"currency"),i.Lb(),i.Lb()),2&e){var n=t.$implicit;i.xb(2),i.oc(n.productName),i.xb(2),i.oc(i.Yb(5,2,n.itemCost,"USD","symbol"))}}function d(e,t){if(1&e&&(i.Mb(0,"div",2),i.Mb(1,"h4"),i.nc(2),i.Wb(3,"capitalize"),i.Wb(4,"capitalize"),i.Lb(),i.Jb(5,"br"),i.Mb(6,"table",3),i.mc(7,l,6,6,"tr",4),i.Mb(8,"tr",5),i.Mb(9,"td"),i.nc(10,"\xa0"),i.Lb(),i.Mb(11,"td",6),i.nc(12),i.Wb(13,"currency"),i.Lb(),i.Lb(),i.Lb(),i.Lb()),2&e){var n=i.Vb();i.xb(2),i.qc("Orders for ",i.Xb(3,5,n.customer.firstName)," ",i.Xb(4,7,n.customer.lastName),""),i.xb(5),i.bc("ngForOf",n.customer.orders)("ngForTrackBy",n.ordersTrackBy),i.xb(5),i.oc(i.Yb(13,9,n.customer.orderTotal,"USD","symbol"))}}function m(e,t){1&e&&(i.Mb(0,"div",2),i.nc(1," No orders found "),i.Lb())}function f(e,t){1&e&&(i.Mb(0,"div",2),i.nc(1," No customer found "),i.Lb())}var g,v=((g=function(){function e(t,n){_classCallCheck(this,e),this.route=t,this.dataService=n,this.orders=[]}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.route.parent.params.subscribe((function(t){e.dataService.getCustomer(+t.id).subscribe((function(t){e.customer=t}))}))}},{key:"ordersTrackBy",value:function(e,t){return e}}]),e}()).\u0275fac=function(e){return new(e||g)(i.Ib(c.a),i.Ib(s.a))},g.\u0275cmp=i.Cb({type:g,selectors:[["cm-customer-orders"]],decls:4,vars:3,consts:[[1,"container"],["class","row",4,"ngIf"],[1,"row"],[1,"table","table-striped","table-hover","orders-table"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"summary-border"],[1,"text-right"]],template:function(e,t){1&e&&(i.Mb(0,"div",0),i.mc(1,d,14,13,"div",1),i.mc(2,m,2,0,"div",1),i.mc(3,f,2,0,"div",1),i.Lb()),2&e&&(i.xb(1),i.bc("ngIf",t.customer&&t.customer.orders),i.xb(1),i.bc("ngIf",t.customer&&!t.customer.orders),i.xb(1),i.bc("ngIf",!t.customer))},directives:[b.l,b.k],pipes:[u.a,b.c],encapsulation:2}),g),p=n("mrSG"),h=["mapsContainer"];function M(e,t){if(1&e&&(i.Mb(0,"div",2),i.Mb(1,"div",6),i.Jb(2,"img",7),i.Wb(3,"lowercase"),i.Lb(),i.Mb(4,"div",8),i.Mb(5,"h4"),i.nc(6),i.Wb(7,"capitalize"),i.Wb(8,"capitalize"),i.Lb(),i.Jb(9,"br"),i.nc(10),i.Jb(11,"br"),i.nc(12),i.Lb(),i.Lb()),2&e){var n=i.Vb();i.xb(2),i.cc("src","assets/images/",i.Xb(3,6,n.customer.gender),".png",i.ic),i.xb(4),i.qc(" ",i.Xb(7,8,n.customer.firstName)," ",i.Xb(8,10,n.customer.lastName),"\xa0 "),i.xb(4),i.pc(" ",n.customer.address," "),i.xb(2),i.qc(" ",n.customer.city,", ",n.customer.state.name," ")}}function C(e,t){1&e&&(i.Mb(0,"div",0),i.nc(1," No customer found\n"),i.Lb())}var L,y=((L=function(){function e(t,n,r){_classCallCheck(this,e),this.route=t,this.dataService=n,this.componentFactoryResolver=r}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.route.parent.params.subscribe((function(t){var n=+t.id;n&&e.dataService.getCustomer(n).subscribe((function(t){e.customer=t,e.customer&&e.customer.latitude&&e.lazyLoadMapComponent()}))}))}},{key:"lazyLoadMapComponent",value:function(){return Object(p.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.mapsViewContainerRef.length){e.next=8;break}return e.next=3,n.e(2).then(n.bind(null,"ISAC"));case 3:t=e.sent,r=t.MapComponent,console.log("Lazy loaded map component!"),o=this.componentFactoryResolver.resolveComponentFactory(r),this.mapComponentRef=this.mapsViewContainerRef.createComponent(o),this.mapComponentRef.instance.zoom=10,this.mapComponentRef.instance.customer=this.customer,this.mapComponentRef.instance.enabled=!0;case 8:case"end":return e.stop()}}),e,this)})))}}]),e}()).\u0275fac=function(e){return new(e||L)(i.Ib(c.a),i.Ib(s.a),i.Ib(i.j))},L.\u0275cmp=i.Cb({type:L,selectors:[["cm-customer-details"]],viewQuery:function(e,t){var n;1&e&&i.rc(h,!0,i.O),2&e&&i.fc(n=i.Ub())&&(t.mapsViewContainerRef=n.first)},decls:10,vars:2,consts:[[1,"container"],["class","row",4,"ngIf"],[1,"row"],[1,"col-md-12"],["mapsContainer",""],["class","container",4,"ngIf"],[1,"col-md-2"],[1,"details-image",3,"src"],[1,"col-md-10"]],template:function(e,t){1&e&&(i.Mb(0,"div",0),i.mc(1,M,13,12,"div",1),i.Jb(2,"br"),i.Jb(3,"br"),i.Mb(4,"div",2),i.Mb(5,"div",3),i.Mb(6,"div"),i.Kb(7,null,4),i.Lb(),i.Lb(),i.Lb(),i.Lb(),i.mc(9,C,2,0,"div",5)),2&e&&(i.xb(1),i.bc("ngIf",t.customer),i.xb(8),i.bc("ngIf",!t.customer))},directives:[b.l],pipes:[b.i,u.a],styles:[".details-image[_ngcontent-%COMP%]{height:100px;width:100px;margin-top:10px}"]}),L),k=n("+qzk"),x=n("9nld"),w=n("OsF4"),I=n("3Pt+"),_=["customerForm"];function O(e,t){if(1&e&&(i.Mb(0,"option",16),i.nc(1),i.Lb()),2&e){var n=t.$implicit;i.bc("ngValue",n.abbreviation),i.xb(1),i.oc(n.name)}}function N(e,t){if(1&e){var n=i.Nb();i.Mb(0,"div",20),i.nc(1," Delete Customer?\xa0\xa0"),i.Mb(2,"button",21),i.Tb("click",(function(e){return i.hc(n),i.Vb(2).delete(e)})),i.nc(3,"Yes"),i.Lb(),i.nc(4,"\xa0\xa0 "),i.Mb(5,"button",22),i.Tb("click",(function(){return i.hc(n),i.Vb(2).deleteMessageEnabled=!1})),i.nc(6,"No"),i.Lb(),i.Lb()}}function S(e,t){if(1&e){var n=i.Nb();i.Mb(0,"button",21),i.Tb("click",(function(){return i.hc(n),i.Vb(2).deleteMessageEnabled=!0})),i.nc(1,"Delete"),i.Lb()}}function F(e,t){if(1&e){var n=i.Nb();i.Mb(0,"div",23),i.Mb(1,"button",22),i.Tb("click",(function(e){return i.hc(n),i.Vb(2).cancel(e)})),i.nc(2,"Cancel"),i.Lb(),i.nc(3,"\xa0\xa0 "),i.Mb(4,"button",24),i.nc(5),i.Lb(),i.Lb()}if(2&e){var r=i.Vb(2),o=i.gc(2);i.xb(4),i.bc("disabled",o.pristine||!o.valid),i.xb(1),i.oc(r.operationText)}}function P(e,t){if(1&e&&(i.Mb(0,"div"),i.mc(1,N,7,0,"div",17),i.mc(2,S,2,0,"button",18),i.nc(3,"\xa0\xa0 "),i.mc(4,F,6,2,"div",19),i.Lb()),2&e){var n=i.Vb();i.xb(1),i.bc("ngIf",n.customer.id&&n.deleteMessageEnabled),i.xb(1),i.bc("ngIf",n.customer.id&&!n.deleteMessageEnabled),i.xb(2),i.bc("ngIf",!n.deleteMessageEnabled)}}function T(e,t){if(1&e&&(i.Mb(0,"div",25),i.nc(1),i.Lb()),2&e){var n=i.Vb();i.xb(1),i.oc(n.errorMessage)}}var J,V,q,D,R,A=((J=function(){function e(t,n,r,o,c,i){_classCallCheck(this,e),this.router=t,this.route=n,this.dataService=r,this.growler=o,this.modalService=c,this.logger=i,this.customer={id:0,firstName:"",lastName:"",gender:"",address:"",city:"",state:{abbreviation:"",name:""}},this.operationText="Insert"}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.route.parent.params.subscribe((function(t){var n=+t.id;0!==n&&(e.operationText="Update",e.getCustomer(n))})),this.dataService.getStates().subscribe((function(t){return e.states=t}))}},{key:"getCustomer",value:function(e){var t=this;this.dataService.getCustomer(e).subscribe((function(e){t.customer=e}))}},{key:"submit",value:function(){var e=this;0===this.customer.id?this.dataService.insertCustomer(this.customer).subscribe((function(t){if(t)e.customerForm.form.markAsPristine(),e.router.navigate(["/customers"]);else{var n="Unable to insert customer";e.growler.growl(n,k.a.Danger),e.errorMessage=n}}),(function(t){return e.logger.log(t)})):this.dataService.updateCustomer(this.customer).subscribe((function(t){if(t)e.customerForm.form.markAsPristine(),e.growler.growl("Operation performed successfully.",k.a.Success);else{var n="Unable to update customer";e.growler.growl(n,k.a.Danger),e.errorMessage=n}}),(function(t){return e.logger.log(t)}))}},{key:"cancel",value:function(e){e.preventDefault(),this.router.navigate(["/customers"])}},{key:"delete",value:function(e){var t=this;e.preventDefault(),this.dataService.deleteCustomer(this.customer.id).subscribe((function(e){e?t.router.navigate(["/customers"]):t.errorMessage="Unable to delete customer"}),(function(e){return t.logger.log(e)}))}},{key:"canDeactivate",value:function(){return!this.customerForm.dirty||this.modalService.show({header:"Lose Unsaved Changes?",body:"You have unsaved changes! Would you like to leave the page and lose them?",cancelButtonText:"Cancel",OKButtonText:"Leave"})}}]),e}()).\u0275fac=function(e){return new(e||J)(i.Ib(c.b),i.Ib(c.a),i.Ib(s.a),i.Ib(k.b),i.Ib(x.a),i.Ib(w.a))},J.\u0275cmp=i.Cb({type:J,selectors:[["cm-customer-edit"]],viewQuery:function(e,t){var n;1&e&&i.kc(_,!0),2&e&&i.fc(n=i.Ub())&&(t.customerForm=n.first)},decls:39,vars:12,consts:[["novalidate","",1,"customer-form",3,"ngSubmit"],["customerForm","ngForm"],[1,"form-group"],["type","text","name","firstName","required","",1,"form-control",3,"ngModel","ngModelChange"],["firstName","ngModel"],[1,"alert","alert-danger",3,"hidden"],["type","text","name","lastName","required","",1,"form-control",3,"ngModel","ngModelChange"],["lastName","ngModel"],["type","text","name","address","required","",1,"form-control",3,"ngModel","ngModelChange"],["address","ngModel"],["type","text","name","city","required","",1,"form-control",3,"ngModel","ngModelChange"],["city","ngModel"],["name","state","required","",1,"form-control",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[3,"ngValue"],["class","alert alert-warning",4,"ngIf"],["class","btn btn-danger",3,"click",4,"ngIf"],["class","pull-right",4,"ngIf"],[1,"alert","alert-warning"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-default",3,"click"],[1,"pull-right"],["type","submit",1,"btn","btn-success",3,"disabled"],[1,"alert","alert-danger"]],template:function(e,t){if(1&e&&(i.Mb(0,"div"),i.Mb(1,"form",0,1),i.Tb("ngSubmit",(function(){return t.submit()})),i.Mb(3,"div",2),i.Mb(4,"label"),i.nc(5,"First Name"),i.Lb(),i.Mb(6,"input",3,4),i.Tb("ngModelChange",(function(e){return t.customer.firstName=e})),i.Lb(),i.Mb(8,"div",5),i.nc(9,"First Name is required"),i.Lb(),i.Lb(),i.Mb(10,"div",2),i.Mb(11,"label"),i.nc(12,"Last Name"),i.Lb(),i.Mb(13,"input",6,7),i.Tb("ngModelChange",(function(e){return t.customer.lastName=e})),i.Lb(),i.Mb(15,"div",5),i.nc(16,"Last Name is required"),i.Lb(),i.Lb(),i.Mb(17,"div",2),i.Mb(18,"label"),i.nc(19,"Address"),i.Lb(),i.Mb(20,"input",8,9),i.Tb("ngModelChange",(function(e){return t.customer.address=e})),i.Lb(),i.Mb(22,"div",5),i.nc(23,"Address is required"),i.Lb(),i.Lb(),i.Mb(24,"div",2),i.Mb(25,"label"),i.nc(26,"City"),i.Lb(),i.Mb(27,"input",10,11),i.Tb("ngModelChange",(function(e){return t.customer.city=e})),i.Lb(),i.Mb(29,"div",5),i.nc(30,"City is required"),i.Lb(),i.Lb(),i.Mb(31,"div",2),i.Mb(32,"label"),i.nc(33,"State"),i.Lb(),i.Mb(34,"select",12),i.Tb("ngModelChange",(function(e){return t.customer.state.abbreviation=e})),i.mc(35,O,2,2,"option",13),i.Lb(),i.Lb(),i.mc(36,P,5,3,"div",14),i.mc(37,T,2,1,"div",15),i.Lb(),i.Jb(38,"br"),i.Lb()),2&e){var n=i.gc(7),r=i.gc(14),o=i.gc(21),c=i.gc(28);i.xb(6),i.bc("ngModel",t.customer.firstName),i.xb(2),i.bc("hidden",n.pristine||n.valid),i.xb(5),i.bc("ngModel",t.customer.lastName),i.xb(2),i.bc("hidden",r.pristine||r.valid),i.xb(5),i.bc("ngModel",t.customer.address),i.xb(2),i.bc("hidden",o.pristine||o.valid),i.xb(5),i.bc("ngModel",t.customer.city),i.xb(2),i.bc("hidden",c.pristine||c.valid),i.xb(5),i.bc("ngModel",t.customer.state.abbreviation),i.xb(1),i.bc("ngForOf",t.states),i.xb(1),i.bc("ngIf",t.customer),i.xb(1),i.bc("ngIf",null!=t.errorMessage)}},directives:[I.r,I.h,I.i,I.b,I.n,I.g,I.j,I.o,b.k,b.l,I.k,I.q],styles:[".customer-form[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%], .customer-form[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%], .customer-form[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .customer-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%}.customer-form[_ngcontent-%COMP%]   .ng-invalid[_ngcontent-%COMP%]{border-left:5px solid #a94442}.customer-form[_ngcontent-%COMP%]   .ng-valid[_ngcontent-%COMP%]{border-left:5px solid #42a948}"]}),J),U=n("7dP1"),z=((q=function(){function e(t,n){_classCallCheck(this,e),this.authService=t,this.router=n}return _createClass(e,[{key:"canActivate",value:function(e,t){return!!this.authService.isAuthenticated||(this.authService.redirectUrl=t.url,this.router.navigate(["/login"]),!1)}}]),e}()).\u0275fac=function(e){return new(e||q)(i.Qb(U.a),i.Qb(c.b))},q.\u0275prov=i.Eb({token:q,factory:q.\u0275fac}),q),E=((V=function(){function e(t){_classCallCheck(this,e),this.logger=t}return _createClass(e,[{key:"canDeactivate",value:function(e,t,n){return this.logger.log("CustomerId: ".concat(t.parent.params.id," URL: ").concat(n.url)),e.canDeactivate()}}]),e}()).\u0275fac=function(e){return new(e||V)(i.Qb(w.a))},V.\u0275prov=i.Eb({token:V,factory:V.\u0275fac}),V),W=[{path:"",component:a,children:[{path:"orders",component:v},{path:"details",component:y},{path:"edit",component:A,canActivate:[z],canDeactivate:[E]}]}],X=((R=function e(){_classCallCheck(this,e)}).components=[a,v,y,A],R.\u0275mod=i.Gb({type:R}),R.\u0275inj=i.Fb({factory:function(e){return new(e||R)},providers:[z,E],imports:[[c.e.forChild(W)],c.e]}),R),j=((D=function e(){_classCallCheck(this,e)}).\u0275mod=i.Gb({type:D}),D.\u0275inj=i.Fb({factory:function(e){return new(e||D)},imports:[[X,o.a]]}),D)}}]);