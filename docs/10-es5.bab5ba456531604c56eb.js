function _defineProperties(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,r,t){return r&&_defineProperties(e.prototype,r),t&&_defineProperties(e,t),e}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"+p+5":function(e,r,t){"use strict";t.r(r),t.d(r,"OrderModule",(function(){return F}));var n,o=t("PCNd"),c=t("tyNb"),i=t("fXoL"),a=((n=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||n)},n.\u0275cmp=i.Cb({type:n,selectors:[["cm-orders"]],decls:13,vars:0,consts:[[1,"orders","view"],[1,"container"],[1,"glyphicon","glyphicon-user"],["routerLink","/orders"]],template:function(e,r){1&e&&(i.Mb(0,"div",0),i.Mb(1,"div",1),i.Mb(2,"header"),i.Mb(3,"h3"),i.Jb(4,"span",2),i.nc(5,"\xa0\xa0Order Information"),i.Lb(),i.Lb(),i.Jb(6,"br"),i.Mb(7,"div",1),i.Jb(8,"router-outlet"),i.Jb(9,"br"),i.Jb(10,"br"),i.Mb(11,"a",3),i.nc(12,"View all Orders"),i.Lb(),i.Lb(),i.Lb(),i.Lb())},directives:[c.f,c.d],encapsulation:2}),n),s=t("+qzk"),b=t("cplz"),d=t("9nld"),u=t("OsF4"),l=t("ofXK"),f=t("3Pt+"),m=t("vTEt"),g=["orderForm"];function h(e,r){if(1&e&&(i.Mb(0,"tr"),i.Mb(1,"td"),i.nc(2),i.Lb(),i.Mb(3,"td",23),i.nc(4),i.Wb(5,"currency"),i.Lb(),i.Lb()),2&e){var t=r.$implicit;i.xb(2),i.oc(t.productName),i.xb(2),i.oc(i.Yb(5,2,t.itemCost,"USD","symbol"))}}function p(e,r){if(1&e&&(i.Mb(0,"div",7),i.Mb(1,"h4"),i.nc(2),i.Wb(3,"capitalize"),i.Wb(4,"capitalize"),i.Lb(),i.Jb(5,"br"),i.Mb(6,"table",20),i.mc(7,h,6,6,"tr",21),i.Mb(8,"tr",22),i.Mb(9,"td"),i.nc(10,"\xa0"),i.Lb(),i.Mb(11,"td",23),i.nc(12),i.Wb(13,"currency"),i.Lb(),i.Lb(),i.Lb(),i.Lb()),2&e){var t=i.Vb();i.xb(2),i.qc("Orders for ",i.Xb(3,5,t.customer.firstName)," ",i.Xb(4,7,t.customer.lastName),""),i.xb(5),i.bc("ngForOf",t.customer.orders)("ngForTrackBy",t.ordersTrackBy),i.xb(5),i.oc(i.Yb(13,9,t.customer.orderTotal,"USD","symbol"))}}function v(e,r){1&e&&(i.Mb(0,"div",7),i.nc(1," No orders found "),i.Lb())}function M(e,r){1&e&&(i.Mb(0,"div",7),i.nc(1," No customer found "),i.Lb())}function C(e,r){if(1&e&&(i.Mb(0,"div",24),i.nc(1),i.Lb()),2&e){var t=i.Vb();i.xb(1),i.oc(t.errorMessage)}}var y,L,k,P,x,w=((y=function(){function e(r,t,n,o,c,i){_classCallCheck(this,e),this.router=r,this.route=t,this.dataService=n,this.growler=o,this.modalService=c,this.logger=i,this.addAnotherProduct=!0,this.order={productName:"",itemCost:0},this.operationText="Add Order"}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.route.parent.params.subscribe((function(r){var t=+r.id;0!==t&&e.getCustomer(t)}))}},{key:"getCustomer",value:function(e){var r=this;this.dataService.getCustomer(e).subscribe((function(e){r.customer=e}))}},{key:"submit",value:function(){var e=this;this.customer.orders.push(this.order),this.customer.orderTotal+=this.order.itemCost,this.dataService.updateCustomer(this.customer).subscribe((function(r){if(r)e.orderForm.form.markAsPristine(),e.growler.growl("Operation performed successfully.",s.a.Success),e.addAnotherProduct||e.router.navigate(["/orders"]);else{var t="Unable to update customer";e.growler.growl(t,s.a.Danger),e.errorMessage=t}}),(function(r){return e.logger.log(r)})),this.order={productName:"",itemCost:0}}},{key:"cancel",value:function(e){e.preventDefault(),this.router.navigate(["/orders"])}},{key:"canDeactivate",value:function(){return!this.orderForm.dirty||this.modalService.show({header:"Lose Unsaved Changes?",body:"You have unsaved changes! Would you like to leave the page and lose them?",cancelButtonText:"Cancel",OKButtonText:"Leave"})}},{key:"ordersTrackBy",value:function(e,r){return e}}]),e}()).\u0275fac=function(e){return new(e||y)(i.Ib(c.b),i.Ib(c.a),i.Ib(b.a),i.Ib(s.b),i.Ib(d.a),i.Ib(u.a))},y.\u0275cmp=i.Cb({type:y,selectors:[["cm-customer-edit"]],viewQuery:function(e,r){var t;1&e&&i.kc(g,!0),2&e&&i.fc(t=i.Ub())&&(r.orderForm=t.first)},decls:34,vars:11,consts:[[1,"container"],["class","row",4,"ngIf"],[1,"form-check"],["type","checkbox","id","addAnotherProduct",1,"form-check-input",3,"ngModel","ngModelChange"],["for","addAnotherProduct",1,"form-check-label"],["novalidate","",1,"order-form",3,"ngSubmit"],["orderForm","ngForm"],[1,"row"],[1,"form-group","col-xs-6"],["for","productName"],["type","text","name","productName","id","productName","required","",1,"form-control",3,"ngModel","ngModelChange"],["productName","ngModel"],[1,"alert","alert-danger",3,"hidden"],["for","itemCost"],["type","number","name","itemCost","id","itemCost","required","",1,"form-control",3,"ngModel","ngModelChange"],["itemCost","ngModel"],[1,"pull-right"],[1,"btn","btn-default",3,"click"],["type","submit",1,"btn","btn-success",3,"disabled"],["class","alert alert-danger",4,"ngIf"],[1,"table","table-striped","table-hover","orders-table"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"summary-border"],[1,"text-right"],[1,"alert","alert-danger"]],template:function(e,r){if(1&e&&(i.Mb(0,"div"),i.Mb(1,"div",0),i.mc(2,p,14,13,"div",1),i.mc(3,v,2,0,"div",1),i.mc(4,M,2,0,"div",1),i.Lb(),i.Mb(5,"div",2),i.Mb(6,"input",3),i.Tb("ngModelChange",(function(e){return r.addAnotherProduct=e})),i.Lb(),i.Mb(7,"label",4),i.nc(8,"Add More Products"),i.Lb(),i.Lb(),i.Mb(9,"form",5,6),i.Tb("ngSubmit",(function(){return r.submit()})),i.Mb(11,"div",7),i.Mb(12,"div",8),i.Mb(13,"label",9),i.nc(14,"Item"),i.Lb(),i.Mb(15,"input",10,11),i.Tb("ngModelChange",(function(e){return r.order.productName=e})),i.Lb(),i.Mb(17,"div",12),i.nc(18,"Product Name is required "),i.Lb(),i.Lb(),i.Mb(19,"div",8),i.Mb(20,"label",13),i.nc(21,"Price"),i.Lb(),i.Mb(22,"input",14,15),i.Tb("ngModelChange",(function(e){return r.order.itemCost=e})),i.Lb(),i.Mb(24,"div",12),i.nc(25,"Price is required"),i.Lb(),i.Lb(),i.Lb(),i.Mb(26,"div",16),i.Mb(27,"button",17),i.Tb("click",(function(e){return r.cancel(e)})),i.nc(28,"Cancel"),i.Lb(),i.nc(29,"\xa0\xa0 "),i.Mb(30,"button",18),i.nc(31),i.Lb(),i.Lb(),i.mc(32,C,2,1,"div",19),i.Lb(),i.Jb(33,"br"),i.Lb()),2&e){var t=i.gc(10),n=i.gc(16),o=i.gc(23);i.xb(2),i.bc("ngIf",r.customer&&r.customer.orders),i.xb(1),i.bc("ngIf",r.customer&&!r.customer.orders),i.xb(1),i.bc("ngIf",!r.customer),i.xb(2),i.bc("ngModel",r.addAnotherProduct),i.xb(9),i.bc("ngModel",r.order.productName),i.xb(2),i.bc("hidden",n.pristine||n.valid),i.xb(5),i.bc("ngModel",r.order.itemCost),i.xb(2),i.bc("hidden",o.pristine||o.valid),i.xb(6),i.bc("disabled",t.pristine||!t.valid),i.xb(1),i.oc(r.operationText),i.xb(1),i.bc("ngIf",null!=r.errorMessage)}},directives:[l.l,f.a,f.g,f.j,f.r,f.h,f.i,f.b,f.n,f.l,l.k],pipes:[m.a,l.c],styles:[".order-form[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%], .order-form[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%], .order-form[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .order-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%}.order-form[_ngcontent-%COMP%]   .ng-invalid[_ngcontent-%COMP%]{border-left:5px solid #a94442}.order-form[_ngcontent-%COMP%]   .ng-valid[_ngcontent-%COMP%]{border-left:5px solid #42a948}"]}),y),_=t("7dP1"),O=((k=function(){function e(r,t){_classCallCheck(this,e),this.authService=r,this.router=t}return _createClass(e,[{key:"canActivate",value:function(e,r){return!!this.authService.isAuthenticated||(this.authService.redirectUrl=r.url,this.router.navigate(["/login"]),!1)}}]),e}()).\u0275fac=function(e){return new(e||k)(i.Qb(_.a),i.Qb(c.b))},k.\u0275prov=i.Eb({token:k,factory:k.\u0275fac}),k),T=((L=function(){function e(r){_classCallCheck(this,e),this.logger=r}return _createClass(e,[{key:"canDeactivate",value:function(e,r,t){return this.logger.log("CustomerId: ".concat(r.parent.params.id," URL: ").concat(t.url)),e.canDeactivate()}}]),e}()).\u0275fac=function(e){return new(e||L)(i.Qb(u.a))},L.\u0275prov=i.Eb({token:L,factory:L.\u0275fac}),L),I=[{path:"",component:a,children:[{path:"addOrder",component:w,canActivate:[O],canDeactivate:[T]}]}],N=((x=function e(){_classCallCheck(this,e)}).components=[a,w],x.\u0275mod=i.Gb({type:x}),x.\u0275inj=i.Fb({factory:function(e){return new(e||x)},providers:[O,T],imports:[[c.e.forChild(I)],c.e]}),x),F=((P=function e(){_classCallCheck(this,e)}).\u0275mod=i.Gb({type:P}),P.\u0275inj=i.Fb({factory:function(e){return new(e||P)},imports:[[N,o.a]]}),P)}}]);