(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{ISAC:function(t,e,i){"use strict";i.r(e),i.d(e,"MapComponent",(function(){return b}));var s=i("7o/Q"),n=i("quSY");class a extends n.a{constructor(t,e){super()}schedule(t,e=0){return this}}class h extends a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(s,this.id,e),this}requestAsyncId(t,e,i=0){return setInterval(t.flush.bind(t,this),i)}recycleAsyncId(t,e,i=0){if(null!==i&&this.delay===i&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(t,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let i=!1,s=void 0;try{this.work(t)}catch(n){i=!0,s=!!n&&n||new Error(n)}if(i)return this.unsubscribe(),s}_unsubscribe(){const t=this.id,e=this.scheduler,i=e.actions,s=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==s&&i.splice(s,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}let r=(()=>{class t{constructor(e,i=t.now){this.SchedulerAction=e,this.now=i}schedule(t,e=0,i){return new this.SchedulerAction(this,t).schedule(i,e)}}return t.now=()=>Date.now(),t})();class o extends r{constructor(t,e=r.now){super(t,()=>o.delegate&&o.delegate!==this?o.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,i){return o.delegate&&o.delegate!==this?o.delegate.schedule(t,e,i):super.schedule(t,e,i)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let i;this.active=!0;do{if(i=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,i){for(;t=e.shift();)t.unsubscribe();throw i}}}const c=new o(h);class l{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new d(t,this.dueTime,this.scheduler))}}class d extends s.a{constructor(t,e,i){super(t),this.dueTime=e,this.scheduler=i,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(u,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function u(t){t.debouncedNext()}var p=i("fXoL");let m=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=p.Cb({type:t,selectors:[["cm-map-point"]],inputs:{longitude:"longitude",latitude:"latitude",markerText:"markerText"},decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})();const g=["mapContainer"];let b=(()=>{class t{constructor(){this.markers=[],this.latitude=34.5133,this.longitude=-94.1629,this.markerText="Your Location",this.zoom=8,this._dataPoints=null}get dataPoints(){return this._dataPoints}set dataPoints(t){this._dataPoints=t,this.renderMapPoints()}get enabled(){return this.isEnabled}set enabled(t){this.isEnabled=t,this.init()}ngOnInit(){if(this.latitude&&this.longitude)if(this.mapHeight&&this.mapWidth)this.mapHeight=this.height+"px",this.mapWidth=this.width+"px";else{const t=this.getWindowHeightWidth(this.mapDiv.nativeElement.ownerDocument);this.mapHeight=t.height/2+"px",this.mapWidth=t.width+"px"}}ngAfterContentInit(){this.mapPoints.changes.pipe(function(t,e=c){return i=>i.lift(new l(t,e))}(500)).subscribe(()=>{this.enabled&&this.renderMapPoints()})}init(){setTimeout(()=>{this.ensureScript()},200)}getWindowHeightWidth(t){let e=window.innerWidth||t.documentElement.clientWidth||t.body.clientWidth;return e>900&&(e=900),{height:window.innerHeight||t.documentElement.clientHeight||t.body.clientHeight,width:e}}ensureScript(){this.loadingScript=!0;const t=this.mapDiv.nativeElement.ownerDocument;if(t.querySelector('script[id="googlemaps"]'))this.isEnabled&&this.renderMap();else{const e=t.createElement("script");e.id="googlemaps",e.type="text/javascript",e.async=!0,e.defer=!0,e.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCG1KDldeF_2GzaTXrEHR0l6cyCS7AnmBw",e.onload=()=>{this.loadingScript=!1,this.isEnabled&&this.renderMap()},t.body.appendChild(e)}}renderMap(){const t=this.createLatLong(this.latitude,this.longitude),e={zoom:this.zoom,center:t,mapTypeControl:!0,mapTypeId:google.maps.MapTypeId.ROADMAP};this.map=new google.maps.Map(this.mapDiv.nativeElement,e),this.mapPoints&&this.mapPoints.length||this.dataPoints&&this.dataPoints.length?this.renderMapPoints():this.createMarker(t,this.markerText)}createLatLong(t,e){return t&&e?new google.maps.LatLng(t,e):null}renderMapPoints(){if(this.map){this.clearMapPoints();const t=this.mapPoints&&this.mapPoints.length?this.mapPoints:this.dataPoints;if(t)for(const e of t){let t=e.markerText?e.markerText:`<h3>${e.firstName} ${e.lastName}</h3>`;const i=this.createLatLong(e.latitude,e.longitude);this.createMarker(i,t)}}}clearMapPoints(){this.markers.forEach(t=>{t.setMap(null)}),this.markers=[]}createMarker(t,e){const i=new google.maps.InfoWindow({content:e}),s=new google.maps.Marker({position:t,map:this.map,title:e,animation:google.maps.Animation.DROP});this.markers.push(s),s.addListener("click",()=>{i.open(this.map,s)})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=p.Cb({type:t,selectors:[["cm-map"]],contentQueries:function(t,e,i){var s;1&t&&p.Bb(i,m,!1),2&t&&p.fc(s=p.Ub())&&(e.mapPoints=s)},viewQuery:function(t,e){var i;1&t&&p.kc(g,!0),2&t&&p.fc(i=p.Ub())&&(e.mapDiv=i.first)},inputs:{height:"height",width:"width",latitude:"latitude",longitude:"longitude",markerText:"markerText",zoom:"zoom",dataPoints:"dataPoints",enabled:"enabled"},decls:3,vars:4,consts:[["mapContainer",""]],template:function(t,e){1&t&&(p.Mb(0,"div",null,0),p.nc(2,"Map Loading...."),p.Lb()),2&t&&p.lc("height",e.mapHeight)("width",e.mapWidth)},encapsulation:2,changeDetection:0}),t})()}}]);