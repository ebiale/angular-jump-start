(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{vfUp:function(t,e,n){"use strict";n.r(e),n.d(e,"CustomersModule",(function(){return B}));var r=n("PCNd"),o=n("tyNb"),i=n("mrSG"),s=n("fXoL"),c=n("cplz"),a=n("bEMC"),d=n("OsF4"),b=n("3Pt+");let l=(()=>{class t{constructor(){this.model={filter:null},this.changed=new s.n}filterChanged(t){t.preventDefault(),this.changed.emit(this.model.filter)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Cb({type:t,selectors:[["cm-filter-textbox"]],outputs:{changed:"changed"},decls:3,vars:1,consts:[["type","text","name","filter",3,"ngModel","ngModelChange","keyup"]],template:function(t,e){1&t&&(s.Mb(0,"form"),s.nc(1," Filter: "),s.Mb(2,"input",0),s.Tb("ngModelChange",(function(t){return e.model.filter=t}))("keyup",(function(t){return e.filterChanged(t)})),s.Lb(),s.Lb()),2&t&&(s.xb(2),s.bc("ngModel",e.model.filter))},directives:[b.r,b.h,b.i,b.b,b.g,b.j],styles:["cm-filter-textbox[_ngcontent-%COMP%]{margin-top:5px}"]}),t})();var u=n("MPuK"),m=n("ofXK"),p=n("vTEt");let g=(()=>{class t{transform(t){return t?t.trim():""}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=s.Hb({name:"trim",type:t,pure:!0}),t})();const h=function(t){return["/customers",t,"details"]},f=function(t){return["/customers",t,"edit"]},M=function(t){return["/customers",t,"orders"]};function y(t,e){if(1&t&&(s.Mb(0,"div",4),s.Mb(1,"div",5),s.Mb(2,"div",6),s.Mb(3,"a",7),s.nc(4),s.Wb(5,"capitalize"),s.Wb(6,"capitalize"),s.Lb(),s.Mb(7,"a",8),s.Jb(8,"i",9),s.Lb(),s.Lb(),s.Mb(9,"div",10),s.Mb(10,"div",11),s.Mb(11,"div",12),s.Mb(12,"a",13),s.Jb(13,"img",14),s.Wb(14,"lowercase"),s.Lb(),s.Lb(),s.Mb(15,"div",15),s.Mb(16,"div",16),s.nc(17),s.Wb(18,"trim"),s.Lb(),s.Mb(19,"a",8),s.nc(20,"View Orders"),s.Lb(),s.Lb(),s.Lb(),s.Lb(),s.Lb(),s.Lb()),2&t){const t=e.$implicit;s.xb(3),s.bc("routerLink",s.dc(16,h,t.id)),s.xb(1),s.qc(" ",s.Xb(5,8,t.firstName)," ",s.Xb(6,10,t.lastName)," "),s.xb(3),s.bc("routerLink",s.dc(18,f,t.id)),s.xb(6),s.cc("src","assets/images/",s.Xb(14,12,t.gender),".png",s.ic),s.xb(4),s.qc("",s.Xb(18,14,t.city),", ",t.state.name,""),s.xb(2),s.bc("routerLink",s.dc(20,M,t.id))}}function C(t,e){1&t&&(s.Mb(0,"div"),s.nc(1," No Records Found "),s.Lb())}let L=(()=>{class t{constructor(t){this.trackbyService=t,this.customers=[]}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(s.Ib(u.a))},t.\u0275cmp=s.Cb({type:t,selectors:[["cm-customers-card"]],inputs:{customers:"customers"},decls:4,vars:3,consts:[[1,"container"],[1,"row","card-container"],["class","col-sm-6 col-md-4 col-lg-3",4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"col-sm-6","col-md-4","col-lg-3"],[1,"card"],[1,"card-header"],[1,"white",3,"routerLink"],[3,"routerLink"],["title","Edit",1,"pull-right","glyphicon","glyphicon-edit","edit-icon","white"],[1,"card-body"],[1,"clearfix"],[1,"pull-left","card-body-left"],["href","#",1,"white"],[1,"card-image",3,"src"],[1,"pull-left","card-body-right"],[1,"card-body-content"]],template:function(t,e){1&t&&(s.Mb(0,"div",0),s.Mb(1,"div",1),s.mc(2,y,21,22,"div",2),s.mc(3,C,2,0,"div",3),s.Lb(),s.Lb()),2&t&&(s.xb(2),s.bc("ngForOf",e.customers)("ngForTrackBy",e.trackbyService.customer),s.xb(1),s.bc("ngIf",!e.customers.length))},directives:[m.k,m.l,o.d],pipes:[p.a,m.i,g],styles:[".card-container[_ngcontent-%COMP%]{width:85%}.card[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #d4d4d4;height:120px;margin-bottom:20px;position:relative}.card-header[_ngcontent-%COMP%]{background-color:#027ff4;font-size:14pt;color:#fff;padding:5px;width:100%}.card-close[_ngcontent-%COMP%]{color:#fff;font-weight:700;margin-right:5px}.card-body[_ngcontent-%COMP%]{padding-left:5px}.card-body-left[_ngcontent-%COMP%]{margin-top:-5px}.card-body-right[_ngcontent-%COMP%]{margin-left:20px;margin-top:2px}.card-body-content[_ngcontent-%COMP%]{width:100px}.card-image[_ngcontent-%COMP%]{height:50px;width:50px;margin-top:10px}.white[_ngcontent-%COMP%], .white[_ngcontent-%COMP%]:hover{color:#fff}"],changeDetection:0}),t})();var v=n("+Obw");let x=(()=>{class t{constructor(){this.sorted=new s.n}set sortBy(t){this.sortProperty=t}onClick(){event.preventDefault(),this.sorted.next(this.sortProperty)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=s.Db({type:t,selectors:[["","cmSortBy",""]],hostBindings:function(t,e){1&t&&s.Tb("click",(function(){return e.onClick()}))},inputs:{sortBy:["cmSortBy","sortBy"]},outputs:{sorted:"sorted"}}),t})();const w=function(t){return["/customers",t,"details"]},k=function(t){return["/customers",t,"orders"]};function O(t,e){if(1&t&&(s.Mb(0,"tr"),s.Mb(1,"td"),s.Jb(2,"img",13),s.Wb(3,"lowercase"),s.Lb(),s.Mb(4,"td"),s.Mb(5,"a",14),s.nc(6),s.Wb(7,"capitalize"),s.Lb(),s.Lb(),s.Mb(8,"td"),s.nc(9),s.Wb(10,"capitalize"),s.Lb(),s.Mb(11,"td"),s.nc(12),s.Lb(),s.Mb(13,"td"),s.nc(14),s.Wb(15,"trim"),s.Lb(),s.Mb(16,"td"),s.nc(17),s.Lb(),s.Mb(18,"td"),s.nc(19),s.Wb(20,"currency"),s.Lb(),s.Mb(21,"td"),s.Mb(22,"a",14),s.nc(23,"View Orders"),s.Lb(),s.Lb(),s.Lb()),2&t){const t=e.$implicit;s.xb(2),s.cc("src","assets/images/",s.Xb(3,9,t.gender),".png",s.ic),s.xb(3),s.bc("routerLink",s.dc(21,w,t.id)),s.xb(1),s.oc(s.Xb(7,11,t.firstName)),s.xb(3),s.oc(s.Xb(10,13,t.lastName)),s.xb(3),s.oc(t.address),s.xb(2),s.oc(s.Xb(15,15,t.city)),s.xb(3),s.oc(t.state.name),s.xb(2),s.oc(s.Yb(20,17,t.orderTotal,"USD","symbol")),s.xb(3),s.bc("routerLink",s.dc(23,k,t.id))}}function P(t,e){1&t&&(s.Mb(0,"tr"),s.Mb(1,"td"),s.nc(2,"\xa0"),s.Lb(),s.Mb(3,"td",15),s.nc(4,"No Records Found"),s.Lb(),s.Lb())}let S=(()=>{class t{constructor(t,e){this.sorterService=t,this.trackbyService=e,this.customers=[]}ngOnInit(){}sort(t){this.customers=this.sorterService.sort(this.customers,t)}}return t.\u0275fac=function(e){return new(e||t)(s.Ib(v.a),s.Ib(u.a))},t.\u0275cmp=s.Cb({type:t,selectors:[["cm-customers-grid"]],inputs:{customers:"customers"},decls:26,vars:3,consts:[[1,"container"],[1,"row","grid-container"],[1,"col-md-10"],[1,"table"],[1,"table","table-striped","table-hover"],["cmSortBy","firstName",3,"sorted"],["cmSortBy","lastName",3,"sorted"],["cmSortBy","address",3,"sorted"],["cmSortBy","city",3,"sorted"],["cmSortBy","state.name",3,"sorted"],[3,"click"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],["alt","Customer Image",1,"grid-image",3,"src"],[3,"routerLink"],["colspan","7"]],template:function(t,e){1&t&&(s.Mb(0,"div",0),s.Mb(1,"div",1),s.Mb(2,"div",2),s.Mb(3,"div",3),s.Mb(4,"table",4),s.Mb(5,"thead"),s.Mb(6,"tr"),s.Mb(7,"th"),s.nc(8,"\xa0"),s.Lb(),s.Mb(9,"th",5),s.Tb("sorted",(function(t){return e.sort(t)})),s.nc(10,"First Name"),s.Lb(),s.Mb(11,"th",6),s.Tb("sorted",(function(t){return e.sort(t)})),s.nc(12,"Last Name"),s.Lb(),s.Mb(13,"th",7),s.Tb("sorted",(function(t){return e.sort(t)})),s.nc(14,"Address"),s.Lb(),s.Mb(15,"th",8),s.Tb("sorted",(function(t){return e.sort(t)})),s.nc(16,"City"),s.Lb(),s.Mb(17,"th",9),s.Tb("sorted",(function(t){return e.sort(t)})),s.nc(18,"State"),s.Lb(),s.Mb(19,"th",10),s.Tb("click",(function(){return e.sort("orderTotal")})),s.nc(20,"Order Total"),s.Lb(),s.Mb(21,"th"),s.nc(22,"\xa0"),s.Lb(),s.Lb(),s.Lb(),s.Mb(23,"tbody"),s.mc(24,O,24,25,"tr",11),s.mc(25,P,5,0,"tr",12),s.Lb(),s.Lb(),s.Lb(),s.Lb(),s.Lb(),s.Lb()),2&t&&(s.xb(24),s.bc("ngForOf",e.customers)("ngForTrackBy",e.trackbyService.customer),s.xb(1),s.bc("ngIf",!e.customers.length))},directives:[x,m.k,m.l,o.d],pipes:[m.i,p.a,g,m.c],styles:[".grid-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding-left:0}.grid-container[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}.grid-image[_ngcontent-%COMP%]{height:50px;width:50px;margin-top:10px}"],changeDetection:0}),t})();var T=n("Exvd");const F=["mapsContainer"];let _=(()=>{class t{constructor(t,e,n,r){this.componentFactoryResolver=t,this.dataService=e,this.filterService=n,this.logger=r,this.customers=[],this.displayModeEnum=I,this.totalRecords=0,this.pageSize=10,this._filteredCustomers=[]}get filteredCustomers(){return this._filteredCustomers}set filteredCustomers(t){this._filteredCustomers=t,this.updateMapComponentDataPoints()}ngOnInit(){this.title="Customers",this.filterText="Filter Customers:",this.displayMode=I.Card,this.getCustomersPage(1)}changeDisplayMode(t){this.displayMode=t}pageChanged(t){this.getCustomersPage(t)}getCustomersPage(t){this.dataService.getCustomersPage((t-1)*this.pageSize,this.pageSize).subscribe(t=>{this.customers=this.filteredCustomers=t.results,this.totalRecords=t.totalRecords},t=>this.logger.log(t),()=>this.logger.log("getCustomersPage() retrieved customers for page: "+t))}filterChanged(t){t&&this.customers?(t=t.toUpperCase(),this.filteredCustomers=this.filterService.filter(this.customers,t,["firstName","lastName","city","state.name"])):this.filteredCustomers=this.customers}lazyLoadMapComponent(){return Object(i.a)(this,void 0,void 0,(function*(){if(this.changeDisplayMode(I.Map),!this.mapsViewContainerRef.length){const{MapComponent:t}=yield n.e(2).then(n.bind(null,"ISAC"));console.log("Lazy loaded map component!");const e=this.componentFactoryResolver.resolveComponentFactory(t);this.mapComponentRef=this.mapsViewContainerRef.createComponent(e),this.mapComponentRef.instance.zoom=2,this.mapComponentRef.instance.dataPoints=this.filteredCustomers,this.mapComponentRef.instance.enabled=!0}}))}updateMapComponentDataPoints(){this.mapComponentRef&&(this.mapComponentRef.instance.dataPoints=this.filteredCustomers)}}return t.\u0275fac=function(e){return new(e||t)(s.Ib(s.j),s.Ib(c.a),s.Ib(a.a),s.Ib(d.a))},t.\u0275cmp=s.Cb({type:t,selectors:[["cm-customers"]],viewQuery:function(t,e){var n;1&t&&s.rc(F,!0,s.O),2&t&&s.fc(n=s.Ub())&&(e.mapsViewContainerRef=n.first)},decls:34,vars:14,consts:[[1,"customers","view","indent"],[1,"container"],[1,"glyphicon","glyphicon-user"],[1,"row"],[1,"col-md-10"],[1,"navbar"],[1,"nav","navbar-nav"],[1,"toolbar-item"],[3,"click"],[1,"glyphicon","glyphicon-th-large"],[1,"glyphicon","glyphicon-align-justify"],[1,"glyphicon","glyphicon-map-marker"],["routerLink","/customers/0/edit"],[1,"glyphicon","glyphicon-plus"],[1,"navbar-right",3,"changed"],[3,"customers","hidden"],[3,"hidden"],["mapsContainer",""],[3,"totalItems","pageSize","pageChanged"]],template:function(t,e){1&t&&(s.Mb(0,"div",0),s.Mb(1,"div",1),s.Mb(2,"header"),s.Mb(3,"h3"),s.Jb(4,"span",2),s.nc(5),s.Lb(),s.Lb(),s.Jb(6,"br"),s.Mb(7,"div",3),s.Mb(8,"div",4),s.Mb(9,"div",5),s.Mb(10,"ul",6),s.Mb(11,"li",7),s.Mb(12,"a",8),s.Tb("click",(function(){return e.changeDisplayMode(e.displayModeEnum.Card)})),s.Jb(13,"span",9),s.nc(14," Card View "),s.Lb(),s.Lb(),s.Mb(15,"li",7),s.Mb(16,"a",8),s.Tb("click",(function(){return e.changeDisplayMode(e.displayModeEnum.Grid)})),s.Jb(17,"span",10),s.nc(18," List View "),s.Lb(),s.Lb(),s.Mb(19,"li",7),s.Mb(20,"a",8),s.Tb("click",(function(){return e.lazyLoadMapComponent()})),s.Jb(21,"span",11),s.nc(22," Map View "),s.Lb(),s.Lb(),s.Mb(23,"li",7),s.Mb(24,"a",12),s.Jb(25,"span",13),s.nc(26," New Customer "),s.Lb(),s.Lb(),s.Lb(),s.Mb(27,"cm-filter-textbox",14),s.Tb("changed",(function(t){return e.filterChanged(t)})),s.Lb(),s.Lb(),s.Lb(),s.Lb(),s.Jb(28,"cm-customers-card",15),s.Jb(29,"cm-customers-grid",15),s.Mb(30,"div",16),s.Kb(31,null,17),s.Lb(),s.Mb(33,"cm-pagination",18),s.Tb("pageChanged",(function(t){return e.pageChanged(t)})),s.Lb(),s.Lb(),s.Lb()),2&t&&(s.xb(5),s.pc(" ",e.title," "),s.xb(7),s.Ab("active",e.displayMode===e.displayModeEnum.Card),s.xb(4),s.Ab("active",e.displayMode===e.displayModeEnum.Grid),s.xb(4),s.Ab("active",e.displayMode===e.displayModeEnum.Map),s.xb(8),s.bc("customers",e.filteredCustomers)("hidden",e.displayMode!==e.displayModeEnum.Card),s.xb(1),s.bc("customers",e.filteredCustomers)("hidden",e.displayMode!==e.displayModeEnum.Grid),s.xb(1),s.bc("hidden",e.displayMode!==e.displayModeEnum.Map),s.xb(3),s.bc("totalItems",e.totalRecords)("pageSize",e.pageSize))},directives:[o.d,l,L,S,T.a],encapsulation:2}),t})();var I=function(t){return t[t.Card=0]="Card",t[t.Grid=1]="Grid",t[t.Map=2]="Map",t}({});const R=[{path:"",component:_}];let z=(()=>{class t{}return t.components=[_,L,S],t.\u0275mod=s.Gb({type:t}),t.\u0275inj=s.Fb({factory:function(e){return new(e||t)},imports:[[o.e.forChild(R)],o.e]}),t})(),B=(()=>{class t{}return t.\u0275mod=s.Gb({type:t}),t.\u0275inj=s.Fb({factory:function(e){return new(e||t)},imports:[[z,r.a]]}),t})()}}]);