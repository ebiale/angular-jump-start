(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"+p+5":function(e,r,t){"use strict";t.r(r),t.d(r,"OrderModule",(function(){return O}));var o=t("PCNd"),n=t("tyNb"),c=t("fXoL");let i=(()=>{class e{constructor(){}}return e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=c.Cb({type:e,selectors:[["cm-orders"]],decls:13,vars:0,consts:[[1,"orders","view"],[1,"container"],[1,"glyphicon","glyphicon-user"],["routerLink","/orders"]],template:function(e,r){1&e&&(c.Mb(0,"div",0),c.Mb(1,"div",1),c.Mb(2,"header"),c.Mb(3,"h3"),c.Jb(4,"span",2),c.nc(5,"\xa0\xa0Order Information"),c.Lb(),c.Lb(),c.Jb(6,"br"),c.Mb(7,"div",1),c.Jb(8,"router-outlet"),c.Jb(9,"br"),c.Jb(10,"br"),c.Mb(11,"a",3),c.nc(12,"View all Orders"),c.Lb(),c.Lb(),c.Lb(),c.Lb())},directives:[n.f,n.d],encapsulation:2}),e})();var s=t("+qzk"),b=t("cplz"),d=t("9nld"),a=t("OsF4"),u=t("ofXK"),l=t("3Pt+"),m=t("vTEt");const g=["orderForm"];function h(e,r){if(1&e&&(c.Mb(0,"tr"),c.Mb(1,"td"),c.nc(2),c.Lb(),c.Mb(3,"td",23),c.nc(4),c.Wb(5,"currency"),c.Lb(),c.Lb()),2&e){const e=r.$implicit;c.xb(2),c.oc(e.productName),c.xb(2),c.oc(c.Yb(5,2,e.itemCost,"USD","symbol"))}}function f(e,r){if(1&e&&(c.Mb(0,"div",7),c.Mb(1,"h4"),c.nc(2),c.Wb(3,"capitalize"),c.Wb(4,"capitalize"),c.Lb(),c.Jb(5,"br"),c.Mb(6,"table",20),c.mc(7,h,6,6,"tr",21),c.Mb(8,"tr",22),c.Mb(9,"td"),c.nc(10,"\xa0"),c.Lb(),c.Mb(11,"td",23),c.nc(12),c.Wb(13,"currency"),c.Lb(),c.Lb(),c.Lb(),c.Lb()),2&e){const e=c.Vb();c.xb(2),c.qc("Orders for ",c.Xb(3,5,e.customer.firstName)," ",c.Xb(4,7,e.customer.lastName),""),c.xb(5),c.bc("ngForOf",e.customer.orders)("ngForTrackBy",e.ordersTrackBy),c.xb(5),c.oc(c.Yb(13,9,e.customer.orderTotal,"USD","symbol"))}}function p(e,r){1&e&&(c.Mb(0,"div",7),c.nc(1," No orders found "),c.Lb())}function M(e,r){1&e&&(c.Mb(0,"div",7),c.nc(1," No customer found "),c.Lb())}function v(e,r){if(1&e&&(c.Mb(0,"div",24),c.nc(1),c.Lb()),2&e){const e=c.Vb();c.xb(1),c.oc(e.errorMessage)}}let L=(()=>{class e{constructor(e,r,t,o,n,c){this.router=e,this.route=r,this.dataService=t,this.growler=o,this.modalService=n,this.logger=c,this.addAnotherProduct=!0,this.order={productName:"",itemCost:0},this.operationText="Add Order"}ngOnInit(){this.route.parent.params.subscribe(e=>{const r=+e.id;0!==r&&this.getCustomer(r)})}getCustomer(e){this.dataService.getCustomer(e).subscribe(e=>{this.customer=e})}submit(){this.customer.orders.push(this.order),this.customer.orderTotal+=this.order.itemCost,this.dataService.updateCustomer(this.customer).subscribe(e=>{if(e)this.orderForm.form.markAsPristine(),this.growler.growl("Operation performed successfully.",s.a.Success),this.addAnotherProduct||this.router.navigate(["/orders"]);else{const e="Unable to update customer";this.growler.growl(e,s.a.Danger),this.errorMessage=e}},e=>this.logger.log(e)),this.order={productName:"",itemCost:0}}cancel(e){e.preventDefault(),this.router.navigate(["/orders"])}canDeactivate(){return!this.orderForm.dirty||this.modalService.show({header:"Lose Unsaved Changes?",body:"You have unsaved changes! Would you like to leave the page and lose them?",cancelButtonText:"Cancel",OKButtonText:"Leave"})}ordersTrackBy(e,r){return e}}return e.\u0275fac=function(r){return new(r||e)(c.Ib(n.b),c.Ib(n.a),c.Ib(b.a),c.Ib(s.b),c.Ib(d.a),c.Ib(a.a))},e.\u0275cmp=c.Cb({type:e,selectors:[["cm-customer-edit"]],viewQuery:function(e,r){var t;1&e&&c.kc(g,!0),2&e&&c.fc(t=c.Ub())&&(r.orderForm=t.first)},decls:34,vars:11,consts:[[1,"container"],["class","row",4,"ngIf"],[1,"form-check"],["type","checkbox","id","addAnotherProduct",1,"form-check-input",3,"ngModel","ngModelChange"],["for","addAnotherProduct",1,"form-check-label"],["novalidate","",1,"order-form",3,"ngSubmit"],["orderForm","ngForm"],[1,"row"],[1,"form-group","col-xs-6"],["for","productName"],["type","text","name","productName","id","productName","required","",1,"form-control",3,"ngModel","ngModelChange"],["productName","ngModel"],[1,"alert","alert-danger",3,"hidden"],["for","itemCost"],["type","number","name","itemCost","id","itemCost","required","",1,"form-control",3,"ngModel","ngModelChange"],["itemCost","ngModel"],[1,"pull-right"],[1,"btn","btn-default",3,"click"],["type","submit",1,"btn","btn-success",3,"disabled"],["class","alert alert-danger",4,"ngIf"],[1,"table","table-striped","table-hover","orders-table"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"summary-border"],[1,"text-right"],[1,"alert","alert-danger"]],template:function(e,r){if(1&e&&(c.Mb(0,"div"),c.Mb(1,"div",0),c.mc(2,f,14,13,"div",1),c.mc(3,p,2,0,"div",1),c.mc(4,M,2,0,"div",1),c.Lb(),c.Mb(5,"div",2),c.Mb(6,"input",3),c.Tb("ngModelChange",(function(e){return r.addAnotherProduct=e})),c.Lb(),c.Mb(7,"label",4),c.nc(8,"Add More Products"),c.Lb(),c.Lb(),c.Mb(9,"form",5,6),c.Tb("ngSubmit",(function(){return r.submit()})),c.Mb(11,"div",7),c.Mb(12,"div",8),c.Mb(13,"label",9),c.nc(14,"Item"),c.Lb(),c.Mb(15,"input",10,11),c.Tb("ngModelChange",(function(e){return r.order.productName=e})),c.Lb(),c.Mb(17,"div",12),c.nc(18,"Product Name is required "),c.Lb(),c.Lb(),c.Mb(19,"div",8),c.Mb(20,"label",13),c.nc(21,"Price"),c.Lb(),c.Mb(22,"input",14,15),c.Tb("ngModelChange",(function(e){return r.order.itemCost=e})),c.Lb(),c.Mb(24,"div",12),c.nc(25,"Price is required"),c.Lb(),c.Lb(),c.Lb(),c.Mb(26,"div",16),c.Mb(27,"button",17),c.Tb("click",(function(e){return r.cancel(e)})),c.nc(28,"Cancel"),c.Lb(),c.nc(29,"\xa0\xa0 "),c.Mb(30,"button",18),c.nc(31),c.Lb(),c.Lb(),c.mc(32,v,2,1,"div",19),c.Lb(),c.Jb(33,"br"),c.Lb()),2&e){const e=c.gc(10),t=c.gc(16),o=c.gc(23);c.xb(2),c.bc("ngIf",r.customer&&r.customer.orders),c.xb(1),c.bc("ngIf",r.customer&&!r.customer.orders),c.xb(1),c.bc("ngIf",!r.customer),c.xb(2),c.bc("ngModel",r.addAnotherProduct),c.xb(9),c.bc("ngModel",r.order.productName),c.xb(2),c.bc("hidden",t.pristine||t.valid),c.xb(5),c.bc("ngModel",r.order.itemCost),c.xb(2),c.bc("hidden",o.pristine||o.valid),c.xb(6),c.bc("disabled",e.pristine||!e.valid),c.xb(1),c.oc(r.operationText),c.xb(1),c.bc("ngIf",null!=r.errorMessage)}},directives:[u.l,l.a,l.g,l.j,l.r,l.h,l.i,l.b,l.n,l.l,u.k],pipes:[m.a,u.c],styles:[".order-form[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%], .order-form[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%], .order-form[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .order-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%}.order-form[_ngcontent-%COMP%]   .ng-invalid[_ngcontent-%COMP%]{border-left:5px solid #a94442}.order-form[_ngcontent-%COMP%]   .ng-valid[_ngcontent-%COMP%]{border-left:5px solid #42a948}"]}),e})();var C=t("7dP1");let y=(()=>{class e{constructor(e,r){this.authService=e,this.router=r}canActivate(e,r){return!!this.authService.isAuthenticated||(this.authService.redirectUrl=r.url,this.router.navigate(["/login"]),!1)}}return e.\u0275fac=function(r){return new(r||e)(c.Qb(C.a),c.Qb(n.b))},e.\u0275prov=c.Eb({token:e,factory:e.\u0275fac}),e})(),x=(()=>{class e{constructor(e){this.logger=e}canDeactivate(e,r,t){return this.logger.log(`CustomerId: ${r.parent.params.id} URL: ${t.url}`),e.canDeactivate()}}return e.\u0275fac=function(r){return new(r||e)(c.Qb(a.a))},e.\u0275prov=c.Eb({token:e,factory:e.\u0275fac}),e})();const P=[{path:"",component:i,children:[{path:"addOrder",component:L,canActivate:[y],canDeactivate:[x]}]}];let w=(()=>{class e{}return e.components=[i,L],e.\u0275mod=c.Gb({type:e}),e.\u0275inj=c.Fb({factory:function(r){return new(r||e)},providers:[y,x],imports:[[n.e.forChild(P)],n.e]}),e})(),O=(()=>{class e{}return e.\u0275mod=c.Gb({type:e}),e.\u0275inj=c.Fb({factory:function(r){return new(r||e)},imports:[[w,o.a]]}),e})()}}]);