function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{vfUp:function(t,e,n){"use strict";n.r(e),n.d(e,"CustomersModule",(function(){return V}));var r,i,o=n("PCNd"),c=n("tyNb"),s=n("mrSG"),a=n("fXoL"),d=n("cplz"),b=n("bEMC"),l=n("OsF4"),u=n("3Pt+"),p=((r=function(){function t(){_classCallCheck(this,t),this.model={filter:null},this.changed=new a.n}return _createClass(t,[{key:"filterChanged",value:function(t){t.preventDefault(),this.changed.emit(this.model.filter)}}]),t}()).\u0275fac=function(t){return new(t||r)},r.\u0275cmp=a.Cb({type:r,selectors:[["cm-filter-textbox"]],outputs:{changed:"changed"},decls:3,vars:1,consts:[["type","text","name","filter",3,"ngModel","ngModelChange","keyup"]],template:function(t,e){1&t&&(a.Mb(0,"form"),a.nc(1," Filter: "),a.Mb(2,"input",0),a.Tb("ngModelChange",(function(t){return e.model.filter=t}))("keyup",(function(t){return e.filterChanged(t)})),a.Lb(),a.Lb()),2&t&&(a.xb(2),a.bc("ngModel",e.model.filter))},directives:[u.r,u.h,u.i,u.b,u.g,u.j],styles:["cm-filter-textbox[_ngcontent-%COMP%]{margin-top:5px}"]}),r),m=n("MPuK"),f=n("ofXK"),h=n("vTEt"),g=((i=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"transform",value:function(t){return t?t.trim():""}}]),t}()).\u0275fac=function(t){return new(t||i)},i.\u0275pipe=a.Hb({name:"trim",type:i,pure:!0}),i),M=function(t){return["/customers",t,"details"]},y=function(t){return["/customers",t,"edit"]},C=function(t){return["/customers",t,"orders"]};function v(t,e){if(1&t&&(a.Mb(0,"div",4),a.Mb(1,"div",5),a.Mb(2,"div",6),a.Mb(3,"a",7),a.nc(4),a.Wb(5,"capitalize"),a.Wb(6,"capitalize"),a.Lb(),a.Mb(7,"a",8),a.Jb(8,"i",9),a.Lb(),a.Lb(),a.Mb(9,"div",10),a.Mb(10,"div",11),a.Mb(11,"div",12),a.Mb(12,"a",13),a.Jb(13,"img",14),a.Wb(14,"lowercase"),a.Lb(),a.Lb(),a.Mb(15,"div",15),a.Mb(16,"div",16),a.nc(17),a.Wb(18,"trim"),a.Lb(),a.Mb(19,"a",8),a.nc(20,"View Orders"),a.Lb(),a.Lb(),a.Lb(),a.Lb(),a.Lb(),a.Lb()),2&t){var n=e.$implicit;a.xb(3),a.bc("routerLink",a.dc(16,M,n.id)),a.xb(1),a.qc(" ",a.Xb(5,8,n.firstName)," ",a.Xb(6,10,n.lastName)," "),a.xb(3),a.bc("routerLink",a.dc(18,y,n.id)),a.xb(6),a.cc("src","assets/images/",a.Xb(14,12,n.gender),".png",a.ic),a.xb(4),a.qc("",a.Xb(18,14,n.city),", ",n.state.name,""),a.xb(2),a.bc("routerLink",a.dc(20,C,n.id))}}function L(t,e){1&t&&(a.Mb(0,"div"),a.nc(1," No Records Found "),a.Lb())}var k,x,w=((k=function(){function t(e){_classCallCheck(this,t),this.trackbyService=e,this.customers=[]}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||k)(a.Ib(m.a))},k.\u0275cmp=a.Cb({type:k,selectors:[["cm-customers-card"]],inputs:{customers:"customers"},decls:4,vars:3,consts:[[1,"container"],[1,"row","card-container"],["class","col-sm-6 col-md-4 col-lg-3",4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"col-sm-6","col-md-4","col-lg-3"],[1,"card"],[1,"card-header"],[1,"white",3,"routerLink"],[3,"routerLink"],["title","Edit",1,"pull-right","glyphicon","glyphicon-edit","edit-icon","white"],[1,"card-body"],[1,"clearfix"],[1,"pull-left","card-body-left"],["href","#",1,"white"],[1,"card-image",3,"src"],[1,"pull-left","card-body-right"],[1,"card-body-content"]],template:function(t,e){1&t&&(a.Mb(0,"div",0),a.Mb(1,"div",1),a.mc(2,v,21,22,"div",2),a.mc(3,L,2,0,"div",3),a.Lb(),a.Lb()),2&t&&(a.xb(2),a.bc("ngForOf",e.customers)("ngForTrackBy",e.trackbyService.customer),a.xb(1),a.bc("ngIf",!e.customers.length))},directives:[f.k,f.l,c.d],pipes:[h.a,f.i,g],styles:[".card-container[_ngcontent-%COMP%]{width:85%}.card[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #d4d4d4;height:120px;margin-bottom:20px;position:relative}.card-header[_ngcontent-%COMP%]{background-color:#027ff4;font-size:14pt;color:#fff;padding:5px;width:100%}.card-close[_ngcontent-%COMP%]{color:#fff;font-weight:700;margin-right:5px}.card-body[_ngcontent-%COMP%]{padding-left:5px}.card-body-left[_ngcontent-%COMP%]{margin-top:-5px}.card-body-right[_ngcontent-%COMP%]{margin-left:20px;margin-top:2px}.card-body-content[_ngcontent-%COMP%]{width:100px}.card-image[_ngcontent-%COMP%]{height:50px;width:50px;margin-top:10px}.white[_ngcontent-%COMP%], .white[_ngcontent-%COMP%]:hover{color:#fff}"],changeDetection:0}),k),_=n("+Obw"),P=((x=function(){function t(){_classCallCheck(this,t),this.sorted=new a.n}return _createClass(t,[{key:"onClick",value:function(){event.preventDefault(),this.sorted.next(this.sortProperty)}},{key:"sortBy",set:function(t){this.sortProperty=t}}]),t}()).\u0275fac=function(t){return new(t||x)},x.\u0275dir=a.Db({type:x,selectors:[["","cmSortBy",""]],hostBindings:function(t,e){1&t&&a.Tb("click",(function(){return e.onClick()}))},inputs:{sortBy:["cmSortBy","sortBy"]},outputs:{sorted:"sorted"}}),x),O=function(t){return["/customers",t,"details"]},S=function(t){return["/customers",t,"orders"]};function T(t,e){if(1&t&&(a.Mb(0,"tr"),a.Mb(1,"td"),a.Jb(2,"img",13),a.Wb(3,"lowercase"),a.Lb(),a.Mb(4,"td"),a.Mb(5,"a",14),a.nc(6),a.Wb(7,"capitalize"),a.Lb(),a.Lb(),a.Mb(8,"td"),a.nc(9),a.Wb(10,"capitalize"),a.Lb(),a.Mb(11,"td"),a.nc(12),a.Lb(),a.Mb(13,"td"),a.nc(14),a.Wb(15,"trim"),a.Lb(),a.Mb(16,"td"),a.nc(17),a.Lb(),a.Mb(18,"td"),a.nc(19),a.Wb(20,"currency"),a.Lb(),a.Mb(21,"td"),a.Mb(22,"a",14),a.nc(23,"View Orders"),a.Lb(),a.Lb(),a.Lb()),2&t){var n=e.$implicit;a.xb(2),a.cc("src","assets/images/",a.Xb(3,9,n.gender),".png",a.ic),a.xb(3),a.bc("routerLink",a.dc(21,O,n.id)),a.xb(1),a.oc(a.Xb(7,11,n.firstName)),a.xb(3),a.oc(a.Xb(10,13,n.lastName)),a.xb(3),a.oc(n.address),a.xb(2),a.oc(a.Xb(15,15,n.city)),a.xb(3),a.oc(n.state.name),a.xb(2),a.oc(a.Yb(20,17,n.orderTotal,"USD","symbol")),a.xb(3),a.bc("routerLink",a.dc(23,S,n.id))}}function F(t,e){1&t&&(a.Mb(0,"tr"),a.Mb(1,"td"),a.nc(2,"\xa0"),a.Lb(),a.Mb(3,"td",15),a.nc(4,"No Records Found"),a.Lb(),a.Lb())}var R,I,z,B,N=((R=function(){function t(e,n){_classCallCheck(this,t),this.sorterService=e,this.trackbyService=n,this.customers=[]}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"sort",value:function(t){this.customers=this.sorterService.sort(this.customers,t)}}]),t}()).\u0275fac=function(t){return new(t||R)(a.Ib(_.a),a.Ib(m.a))},R.\u0275cmp=a.Cb({type:R,selectors:[["cm-customers-grid"]],inputs:{customers:"customers"},decls:26,vars:3,consts:[[1,"container"],[1,"row","grid-container"],[1,"col-md-10"],[1,"table"],[1,"table","table-striped","table-hover"],["cmSortBy","firstName",3,"sorted"],["cmSortBy","lastName",3,"sorted"],["cmSortBy","address",3,"sorted"],["cmSortBy","city",3,"sorted"],["cmSortBy","state.name",3,"sorted"],[3,"click"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],["alt","Customer Image",1,"grid-image",3,"src"],[3,"routerLink"],["colspan","7"]],template:function(t,e){1&t&&(a.Mb(0,"div",0),a.Mb(1,"div",1),a.Mb(2,"div",2),a.Mb(3,"div",3),a.Mb(4,"table",4),a.Mb(5,"thead"),a.Mb(6,"tr"),a.Mb(7,"th"),a.nc(8,"\xa0"),a.Lb(),a.Mb(9,"th",5),a.Tb("sorted",(function(t){return e.sort(t)})),a.nc(10,"First Name"),a.Lb(),a.Mb(11,"th",6),a.Tb("sorted",(function(t){return e.sort(t)})),a.nc(12,"Last Name"),a.Lb(),a.Mb(13,"th",7),a.Tb("sorted",(function(t){return e.sort(t)})),a.nc(14,"Address"),a.Lb(),a.Mb(15,"th",8),a.Tb("sorted",(function(t){return e.sort(t)})),a.nc(16,"City"),a.Lb(),a.Mb(17,"th",9),a.Tb("sorted",(function(t){return e.sort(t)})),a.nc(18,"State"),a.Lb(),a.Mb(19,"th",10),a.Tb("click",(function(){return e.sort("orderTotal")})),a.nc(20,"Order Total"),a.Lb(),a.Mb(21,"th"),a.nc(22,"\xa0"),a.Lb(),a.Lb(),a.Lb(),a.Mb(23,"tbody"),a.mc(24,T,24,25,"tr",11),a.mc(25,F,5,0,"tr",12),a.Lb(),a.Lb(),a.Lb(),a.Lb(),a.Lb(),a.Lb()),2&t&&(a.xb(24),a.bc("ngForOf",e.customers)("ngForTrackBy",e.trackbyService.customer),a.xb(1),a.bc("ngIf",!e.customers.length))},directives:[P,f.k,f.l,c.d],pipes:[f.i,h.a,g,f.c],styles:[".grid-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding-left:0}.grid-container[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}.grid-image[_ngcontent-%COMP%]{height:50px;width:50px;margin-top:10px}"],changeDetection:0}),R),E=n("Exvd"),J=["mapsContainer"],D=((I=function(){function t(e,n,r,i){_classCallCheck(this,t),this.componentFactoryResolver=e,this.dataService=n,this.filterService=r,this.logger=i,this.customers=[],this.displayModeEnum=X,this.totalRecords=0,this.pageSize=10,this._filteredCustomers=[]}return _createClass(t,[{key:"ngOnInit",value:function(){this.title="Customers",this.filterText="Filter Customers:",this.displayMode=X.Card,this.getCustomersPage(1)}},{key:"changeDisplayMode",value:function(t){this.displayMode=t}},{key:"pageChanged",value:function(t){this.getCustomersPage(t)}},{key:"getCustomersPage",value:function(t){var e=this;this.dataService.getCustomersPage((t-1)*this.pageSize,this.pageSize).subscribe((function(t){e.customers=e.filteredCustomers=t.results,e.totalRecords=t.totalRecords}),(function(t){return e.logger.log(t)}),(function(){return e.logger.log("getCustomersPage() retrieved customers for page: "+t)}))}},{key:"filterChanged",value:function(t){t&&this.customers?(t=t.toUpperCase(),this.filteredCustomers=this.filterService.filter(this.customers,t,["firstName","lastName","city","state.name"])):this.filteredCustomers=this.customers}},{key:"lazyLoadMapComponent",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.changeDisplayMode(X.Map),this.mapsViewContainerRef.length){t.next=8;break}return t.next=3,n.e(2).then(n.bind(null,"ISAC"));case 3:e=t.sent,r=e.MapComponent,console.log("Lazy loaded map component!"),i=this.componentFactoryResolver.resolveComponentFactory(r),this.mapComponentRef=this.mapsViewContainerRef.createComponent(i),this.mapComponentRef.instance.zoom=2,this.mapComponentRef.instance.dataPoints=this.filteredCustomers,this.mapComponentRef.instance.enabled=!0;case 8:case"end":return t.stop()}}),t,this)})))}},{key:"updateMapComponentDataPoints",value:function(){this.mapComponentRef&&(this.mapComponentRef.instance.dataPoints=this.filteredCustomers)}},{key:"filteredCustomers",get:function(){return this._filteredCustomers},set:function(t){this._filteredCustomers=t,this.updateMapComponentDataPoints()}}]),t}()).\u0275fac=function(t){return new(t||I)(a.Ib(a.j),a.Ib(d.a),a.Ib(b.a),a.Ib(l.a))},I.\u0275cmp=a.Cb({type:I,selectors:[["cm-customers"]],viewQuery:function(t,e){var n;1&t&&a.rc(J,!0,a.O),2&t&&a.fc(n=a.Ub())&&(e.mapsViewContainerRef=n.first)},decls:34,vars:14,consts:[[1,"customers","view","indent"],[1,"container"],[1,"glyphicon","glyphicon-user"],[1,"row"],[1,"col-md-10"],[1,"navbar"],[1,"nav","navbar-nav"],[1,"toolbar-item"],[3,"click"],[1,"glyphicon","glyphicon-th-large"],[1,"glyphicon","glyphicon-align-justify"],[1,"glyphicon","glyphicon-map-marker"],["routerLink","/customers/0/edit"],[1,"glyphicon","glyphicon-plus"],[1,"navbar-right",3,"changed"],[3,"customers","hidden"],[3,"hidden"],["mapsContainer",""],[3,"totalItems","pageSize","pageChanged"]],template:function(t,e){1&t&&(a.Mb(0,"div",0),a.Mb(1,"div",1),a.Mb(2,"header"),a.Mb(3,"h3"),a.Jb(4,"span",2),a.nc(5),a.Lb(),a.Lb(),a.Jb(6,"br"),a.Mb(7,"div",3),a.Mb(8,"div",4),a.Mb(9,"div",5),a.Mb(10,"ul",6),a.Mb(11,"li",7),a.Mb(12,"a",8),a.Tb("click",(function(){return e.changeDisplayMode(e.displayModeEnum.Card)})),a.Jb(13,"span",9),a.nc(14," Card View "),a.Lb(),a.Lb(),a.Mb(15,"li",7),a.Mb(16,"a",8),a.Tb("click",(function(){return e.changeDisplayMode(e.displayModeEnum.Grid)})),a.Jb(17,"span",10),a.nc(18," List View "),a.Lb(),a.Lb(),a.Mb(19,"li",7),a.Mb(20,"a",8),a.Tb("click",(function(){return e.lazyLoadMapComponent()})),a.Jb(21,"span",11),a.nc(22," Map View "),a.Lb(),a.Lb(),a.Mb(23,"li",7),a.Mb(24,"a",12),a.Jb(25,"span",13),a.nc(26," New Customer "),a.Lb(),a.Lb(),a.Lb(),a.Mb(27,"cm-filter-textbox",14),a.Tb("changed",(function(t){return e.filterChanged(t)})),a.Lb(),a.Lb(),a.Lb(),a.Lb(),a.Jb(28,"cm-customers-card",15),a.Jb(29,"cm-customers-grid",15),a.Mb(30,"div",16),a.Kb(31,null,17),a.Lb(),a.Mb(33,"cm-pagination",18),a.Tb("pageChanged",(function(t){return e.pageChanged(t)})),a.Lb(),a.Lb(),a.Lb()),2&t&&(a.xb(5),a.pc(" ",e.title," "),a.xb(7),a.Ab("active",e.displayMode===e.displayModeEnum.Card),a.xb(4),a.Ab("active",e.displayMode===e.displayModeEnum.Grid),a.xb(4),a.Ab("active",e.displayMode===e.displayModeEnum.Map),a.xb(8),a.bc("customers",e.filteredCustomers)("hidden",e.displayMode!==e.displayModeEnum.Card),a.xb(1),a.bc("customers",e.filteredCustomers)("hidden",e.displayMode!==e.displayModeEnum.Grid),a.xb(1),a.bc("hidden",e.displayMode!==e.displayModeEnum.Map),a.xb(3),a.bc("totalItems",e.totalRecords)("pageSize",e.pageSize))},directives:[c.d,p,w,N,E.a],encapsulation:2}),I),X=function(t){return t[t.Card=0]="Card",t[t.Grid=1]="Grid",t[t.Map=2]="Map",t}({}),W=[{path:"",component:D}],G=((B=function t(){_classCallCheck(this,t)}).components=[D,w,N],B.\u0275mod=a.Gb({type:B}),B.\u0275inj=a.Fb({factory:function(t){return new(t||B)},imports:[[c.e.forChild(W)],c.e]}),B),V=((z=function t(){_classCallCheck(this,t)}).\u0275mod=a.Gb({type:z}),z.\u0275inj=a.Fb({factory:function(t){return new(t||z)},imports:[[G,o.a]]}),z)}}]);